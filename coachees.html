<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mes Coachés - Job-search IA & Coach</title>
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css">
  <link rel="stylesheet" href="https://unpkg.com/tailwindcss@2.2.19/dist/tailwind.min.css">
  <link rel="stylesheet" href="css/main.css">
</head>
<body class="bg-gray-100 font-sans leading-normal tracking-normal">

  <div class="flex flex-col md:flex-row">
    <!-- Navigation -->
    <nav aria-label="alternative nav">
      <div class="bg-gray-800 shadow-xl h-20 fixed bottom-0 mt-12 md:relative md:h-screen z-10 w-full md:w-48 content-center">
        <div class="md:mt-12 md:w-48 md:fixed md:left-0 md:top-0 content-center md:content-start text-left justify-between">
          <ul class="list-reset flex flex-row md:flex-col pt-3 md:py-3 px-1 md:px-2 text-center md:text-left">
            <li class="mr-3 flex-1">
              <a href="index.html" class="block py-1 md:py-3 pl-1 align-middle text-white no-underline hover:text-white border-b-2 border-gray-800 hover:border-blue-500">
                <i class="fas fa-chart-area pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base text-gray-400 md:text-gray-200 block md:inline-block">Tableau de bord</span>
              </a>
            </li>
            <li class="mr-3 flex-1">
              <a href="prompts-library.html" class="block py-1 md:py-3 pl-1 align-middle text-white no-underline hover:text-white border-b-2 border-gray-800 hover:border-green-500">
                <i class="fas fa-comment-alt pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base text-gray-400 md:text-gray-200 block md:inline-block">Prompts IA</span>
              </a>
            </li>
            <li class="mr-3 flex-1">
              <a href="coachees.html" class="block py-1 md:py-3 pl-1 align-middle text-white no-underline hover:text-white border-b-2 border-purple-600">
                <i class="fas fa-users pr-0 md:pr-3 text-purple-600"></i><span class="pb-1 md:pb-0 text-xs md:text-base text-white md:text-white block md:inline-block">Mes coachés</span>
              </a>
            </li>
            <li class="mr-3 flex-1">
              <a href="resources.html" class="block py-1 md:py-3 pl-0 md:pl-1 align-middle text-white no-underline hover:text-white border-b-2 border-gray-800 hover:border-red-500">
                <i class="fas fa-book pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base text-gray-400 md:text-gray-200 block md:inline-block">Ressources</span>
              </a>
            </li>
            <!-- Dans la navigation de coachees.html -->
            <li class="mr-3 flex-1">
              <a href="calendrier.html" class="block py-1 md:py-3 pl-1 align-middle text-white no-underline hover:text-white border-b-2 border-gray-800 hover:border-orange-500">
                <i class="fas fa-calendar-alt pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base text-gray-400 md:text-gray-200 block md:inline-block">Calendrier</span>
            </a>
            </li>
            <li class="mr-3 flex-1">
              <a href="prompt-test.html" class="block py-1 md:py-3 pl-0 md:pl-1 align-middle text-white no-underline hover:text-white border-b-2 border-gray-800 hover:border-yellow-500">
                <i class="fas fa-vial pr-0 md:pr-3"></i><span class="pb-1 md:pb-0 text-xs md:text-base text-gray-400 md:text-gray-200 block md:inline-block">Test des Prompts</span>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Contenu principal -->
    <div id="main" class="main-content flex-1 bg-gray-100 pb-24 md:pb-5">
      <div class="bg-gray-800 pt-3">
        <div class="rounded-tl-3xl bg-gradient-to-r from-blue-900 to-gray-800 p-4 shadow text-2xl text-white">
          <h1 class="font-bold pl-2">Mes Coachés</h1>
        </div>
      </div>
      
 <!-- Section de filtres avec les boutons -->
<div class="p-6">
  <div class="bg-white rounded-lg shadow-xl p-5">
    <div class="filters-container bg-gray-50 p-4 rounded-lg mb-6">
      <div class="flex flex-wrap gap-4 items-center justify-between">
        <!-- Partie gauche : Recherche et filtres -->
        <div class="flex flex-wrap gap-4 items-center">
          <div class="search-box relative">
            <input type="text" placeholder="Rechercher un coaché..." id="coachee-search" class="pl-9 pr-3 py-2 border border-gray-300 rounded-md">
            <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
          </div>
          
          <div class="filter-group flex flex-wrap gap-3">
            <select id="status-filter" class="filter-select border border-gray-300 rounded-md px-3 py-2">
              <option value="all">Tous les statuts</option>
              <option value="active">Actif</option>
              <option value="pending">En attente</option>
              <option value="completed">Terminé</option>
            </select>
            
            <select id="step-filter" class="filter-select border border-gray-300 rounded-md px-3 py-2">
              <option value="all">Toutes les étapes</option>
              <option value="1">Diagnostic</option>
              <option value="2">Marché</option>
              <option value="3">Plan d'action</option>
              <option value="4">CV</option>
              <option value="5">Recherche</option>
              <option value="6">Matching</option>
              <option value="7">Lettres</option>
              <option value="8">Ciblage</option>
              <option value="9">Entretien</option>
              <option value="10">Bilan</option>
            </select>
          </div>
        </div>
        
        <!-- Partie droite : Boutons d'actions -->
        <div class="flex flex-wrap gap-3">
          <!-- Bouton Coachés fictifs -->
          <button onclick="showFictionalCoacheesOptions()" class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded flex items-center transition-colors">
            <i class="fas fa-magic mr-2"></i>Coachés fictifs
          </button>
          
          <!-- Bouton Ajouter -->
          <button onclick="openAddCoacheeModal()" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded flex items-center transition-colors">
            <i class="fas fa-plus mr-2"></i>Ajouter un coaché
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
          
<!-- Carte coaché dynamique -->
<div class="coachee-card bg-white rounded-lg shadow-md overflow-hidden" data-coachee-id="marie-dupont">
  <div class="coachee-header flex justify-between items-center p-4 bg-gray-50 border-b border-gray-200">
    <div class="coachee-avatar w-10 h-10 rounded-full flex items-center justify-center text-white font-bold" style="background-color: #3498DB;">MD</div>
    <div class="flex items-center gap-2">
      <!-- Badge fictif (conditionnel) -->
      <div class="fictional-badge px-2 py-1 text-xs rounded-full bg-orange-100 text-orange-800" style="display: none;">Fictif</div>
      <div class="coachee-status px-2 py-1 text-xs rounded-full bg-green-100 text-green-800">Actif</div>
    </div>
    <div class="coachee-actions flex gap-1">
      <button onclick="editCoachee('marie-dupont')" class="btn-icon w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200" title="Modifier">
        <i class="fas fa-edit"></i>
      </button>
      <button onclick="toggleCoacheeMenu('marie-dupont')" class="btn-icon w-8 h-8 flex items-center justify-center rounded-full hover:bg-gray-200" title="Plus d'options">
        <i class="fas fa-ellipsis-v"></i>
      </button>
    </div>
  </div>
  <div class="coachee-body p-4">
    <h3 class="coachee-name text-lg font-bold mb-1">Marie Dupont</h3>
    <p class="coachee-position text-sm text-gray-600 mb-3">Marketing Digital</p>
    <div class="progress-container h-2 bg-gray-200 rounded-full overflow-hidden mb-3">
      <div class="progress-bar h-full bg-gradient-to-r from-blue-500 to-purple-500 relative" style="width: 90%;">
        <span class="absolute right-0 top-0 transform translate-y-4 text-xs text-gray-600">9/10</span>
      </div>
    </div>
    <p class="current-stage flex items-center text-sm text-gray-700 mb-2">
      <i class="fas fa-tasks mr-2 text-gray-500"></i>
      <span>Préparation Entretien</span>
    </p>
    <p class="last-activity flex items-center text-sm text-gray-700">
      <i class="fas fa-clock mr-2 text-gray-500"></i>
      <span>Dernière activité : Aujourd'hui, 10:30</span>
    </p>
  </div>
  <div class="coachee-footer flex justify-between p-4 border-t border-gray-200 bg-gray-50">
    <button onclick="startSession('Marie Dupont', '9')" class="btn-action flex items-center px-3 py-1 text-sm bg-blue-500 hover:bg-blue-600 text-white rounded">
      <i class="fas fa-play mr-1"></i> Session
    </button>
    <button onclick="openDossier('Marie Dupont')" class="btn-action flex items-center px-3 py-1 text-sm bg-gray-200 hover:bg-gray-300 text-gray-700 rounded">
      <i class="fas fa-folder-open mr-1"></i> Dossier
    </button>
  </div>
      
      <!-- Modal d'ajout d'un nouveau coaché (caché par défaut) -->
      <div id="add-coachee-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="modal-content bg-white w-full max-w-md mx-4 rounded-lg shadow-xl">
          <div class="flex justify-between items-center p-6 border-b border-gray-200">
            <h2 class="text-xl font-bold">Ajouter un nouveau coaché</h2>
            <span class="close text-2xl cursor-pointer">&times;</span>
          </div>
          
          <form id="new-coachee-form" class="p-6">
            <div class="form-group mb-4">
              <label for="coachee-name" class="block text-sm font-medium text-gray-700 mb-1">Nom complet</label>
              <input type="text" id="coachee-name" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
            </div>
            <div class="form-group mb-4">
              <label for="coachee-position" class="block text-sm font-medium text-gray-700 mb-1">Poste recherché</label>
              <input type="text" id="coachee-position" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
            </div>
            <div class="form-group mb-4">
              <label for="coachee-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
              <input type="email" id="coachee-email" required class="w-full px-3 py-2 border border-gray-300 rounded-md">
            </div>
            <div class="form-group mb-4">
              <label for="coachee-phone" class="block text-sm font-medium text-gray-700 mb-1">Téléphone</label>
              <input type="tel" id="coachee-phone" class="w-full px-3 py-2 border border-gray-300 rounded-md">
            </div>
            <div class="form-group mb-4">
              <label for="coachee-notes" class="block text-sm font-medium text-gray-700 mb-1">Notes</label>
              <textarea id="coachee-notes" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
            </div>
            <div class="form-actions flex justify-end space-x-3">
              <button type="button" class="cancel-btn px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded">Annuler</button>
              <button type="submit" class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Ajouter</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

<!-- Modal de modification de coaché -->
<div id="edit-coachee-modal" class="modal fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" style="display: none;">
  <div class="modal-content bg-white rounded-lg p-6 w-full max-w-md mx-4">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-bold text-gray-800">Modifier le coaché</h2>
      <button class="close text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
    </div>
    
    <form id="edit-coachee-form">
      <div class="mb-4">
        <label for="edit-coachee-name" class="block text-sm font-medium text-gray-700 mb-1">Nom complet</label>
        <input type="text" id="edit-coachee-name" name="name" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div class="mb-4">
        <label for="edit-coachee-position" class="block text-sm font-medium text-gray-700 mb-1">Poste recherché</label>
        <input type="text" id="edit-coachee-position" name="position" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div class="mb-4">
        <label for="edit-coachee-email" class="block text-sm font-medium text-gray-700 mb-1">Email</label>
        <input type="email" id="edit-coachee-email" name="email" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
      </div>
      
      <div class="mb-4">
        <label for="edit-coachee-status" class="block text-sm font-medium text-gray-700 mb-1">Statut</label>
        <select id="edit-coachee-status" name="status" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="Actif">Actif</option>
          <option value="En attente">En attente</option>
          <option value="Terminé">Terminé</option>
        </select>
      </div>
      
      <div class="mb-4">
        <label for="edit-coachee-stage" class="block text-sm font-medium text-gray-700 mb-1">Étape actuelle</label>
        <select id="edit-coachee-stage" name="stage" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
          <option value="1">1 - Diagnostic Initial</option>
          <option value="2">2 - Analyse du Marché</option>
          <option value="3">3 - Plan d'Actions</option>
          <option value="4">4 - Analyse CV</option>
          <option value="5">5 - Recherche d'emploi</option>
          <option value="6">6 - Matching</option>
          <option value="7">7 - Lettres de motivation</option>
          <option value="8">8 - Ciblage</option>
          <option value="9">9 - Préparation entretien</option>
          <option value="10">10 - Bilan final</option>
        </select>
      </div>
      
      <div class="mb-6">
        <label for="edit-coachee-notes" class="block text-sm font-medium text-gray-700 mb-1">Notes (optionnel)</label>
        <textarea id="edit-coachee-notes" name="notes" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
      </div>
      
      <div class="flex gap-3">
        <button type="submit" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded transition-colors">
          Sauvegarder
        </button>
        <button type="button" class="cancel-btn flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded transition-colors">
          Annuler
        </button>
      </div>
    </form>
  </div>
</div>

  <script src="js/coachees.js"></script>

<div id="coachees-container" class="p-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    </div>
    
<!-- Modal Ajouter/Modifier Coaché -->
<div id="coacheeModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4 max-h-screen overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
            <h3 id="modalTitle" class="text-lg font-bold">Ajouter un coaché</h3>
            <button onclick="closeCoacheeModal()" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times text-xl"></i>
            </button>
        </div>
        
        <form id="coacheeForm">
            <input type="hidden" id="coacheeId" value="">
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Nom complet *</label>
                <input type="text" id="coacheeName" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ex: Jean Dupont">
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Secteur d'activité *</label>
                <input type="text" id="coacheeSector" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ex: Marketing Digital">
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <input type="email" id="coacheeEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ex: jean.dupont@email.com">
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Téléphone</label>
                <input type="tel" id="coacheePhone" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Ex: 06 12 34 56 78">
            </div>
            
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Étape actuelle</label>
                <select id="coacheeCurrentStep" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="1">1. Diagnostic de départ</option>
                    <option value="2">2. Analyse du marché</option>
                    <option value="3">3. Plan d'action détaillé</option>
                    <option value="4">4. Analyse CV</option>
                    <option value="5">5. Recherche entreprise</option>
                    <option value="6">6. Matching CV / Offre</option>
                    <option value="7">7. Lettres de motivation</option>
                    <option value="8">8. Ciblage offres</option>
                    <option value="9">9. Préparation entretien</option>
                    <option value="10">10. Bilan du coaching</option>
                </select>
            </div>
            
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-1">Statut</label>
                <select id="coacheeStatus" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="active">Actif</option>
                    <option value="pending">En attente</option>
                    <option value="completed">Terminé</option>
                    <option value="paused">En pause</option>
                </select>
            </div>
            
            <div class="flex justify-end space-x-3">
                <button type="button" onclick="closeCoacheeModal()" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md">
                    Annuler
                </button>
                <button type="submit" class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md">
                    <i class="fas fa-save mr-1"></i>
                    <span id="submitButtonText">Ajouter</span>
                </button>
            </div>
        </form>
    </div>
</div>

<!-- Modal de confirmation de suppression -->
<div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 w-full max-w-sm mx-4">
        <div class="text-center">
            <i class="fas fa-exclamation-triangle text-red-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-bold mb-2">Confirmer la suppression</h3>
            <p class="text-gray-600 mb-4">Êtes-vous sûr de vouloir supprimer <strong id="deleteCoacheeName"></strong> ?</p>
            <p class="text-sm text-red-600 mb-6">Cette action supprimera toutes les données associées (sessions, notes, rendez-vous).</p>
            
            <div class="flex justify-center space-x-3">
                <button onclick="closeDeleteModal()" class="px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md">
                    Annuler
                </button>
                <button onclick="confirmDelete()" class="px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md">
                    <i class="fas fa-trash mr-1"></i>
                    Supprimer
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal de gestion des coachés fictifs -->
<div id="fictionalModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
    <div class="bg-white rounded-lg p-6 w-full max-w-md mx-4">
        <div class="text-center">
            <i class="fas fa-magic text-orange-500 text-4xl mb-4"></i>
            <h3 class="text-lg font-bold mb-4">Gestion des Coachés Fictifs</h3>
            
            <div class="bg-orange-50 border border-orange-200 rounded-lg p-4 mb-6">
                <p class="text-orange-800 text-sm mb-3">
                    <strong id="fictionalCount">3 coachés fictifs</strong> détectés dans votre application :
                </p>
                <div class="space-y-2 text-left text-sm">
                    <div class="flex items-center">
                        <i class="fas fa-user text-orange-600 mr-2"></i>
                        <span>Marie Dupont (Marketing Digital)</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-user text-orange-600 mr-2"></i>
                        <span>Thomas Martin (Développement Web)</span>
                    </div>
                    <div class="flex items-center">
                        <i class="fas fa-user text-orange-600 mr-2"></i>
                        <span>Sophie Laurent (Chef de Projet)</span>
                    </div>
                </div>
            </div>
            
            <p class="text-gray-600 text-sm mb-6">
                Ces coachés ont été créés pour la démonstration. Vous pouvez les supprimer pour commencer avec de vrais coachés.
            </p>
            
            <div class="flex flex-col space-y-3">
                <button onclick="removeAllFictionalCoachees()" class="w-full px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded-md">
                    <i class="fas fa-trash mr-2"></i>
                    Supprimer tous les coachés fictifs
                </button>
                <button onclick="convertFictionalToReal()" class="w-full px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-md">
                    <i class="fas fa-user-check mr-2"></i>
                    Convertir en vrais coachés
                </button>
                <button onclick="closeFictionalModal()" class="w-full px-4 py-2 bg-gray-300 hover:bg-gray-400 text-gray-800 rounded-md">
                    Conserver pour le moment
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Notification toast (template) -->
<div id="notificationTemplate" class="hidden">
    <div class="fixed top-4 right-4 text-white px-6 py-3 rounded shadow-lg z-50 transform translate-x-full transition-all duration-300">
        <div class="flex items-center">
            <i class="fas fa-info-circle mr-2"></i>
            <span class="notification-message"></span>
        </div>
    </div>
</div>
</body>
</html>
